<!DOCTYPE HTML>
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="shortcut icon" href="" type="image/x-icon" />
<link rel="icon" href="" type="image/x-icon" />
<link rel='stylesheet' type='text/css' href='index.css' />
<title></title>

<!--<script src="https://d3js.org/d3-hexbin.v0.2.min.js"></script>-->
<script src="./d3.v7.min.js"></script>
<script type="text/javascript" src='indexLib.js'></script>
<script type="text/javascript" src='./indexBuild.js'></script>

<script type="text/javascript" >
const params = (new URL(document.location)).searchParams;
var dataVal = params.get('data'); // is the filename of the data file
var errorVal = params.get('e') || ""; // is the error string

document.addEventListener("DOMContentLoaded", function() {

  // Build the theme dropdown
  buildThemeDropdown();
  // Add change listener
  document.getElementById( "themeSelect" ).addEventListener( "change", function(){ applyStyleSheet( this.value ); });

  if( !dataVal )
  {
    console.log( "Unable to load data file. Missing filename." );
    document.getElementById('errorArea').innerHTML = "Unable to load data file. Missing filename.";

    return false;
  }

  // get the datafile
  fetchData( "../files/"+dataVal+".js", () => {
    // initialization functions here
    emitGameData();
  });
});
</script>

<link rel="stylesheet" type="text/css" id="pagestyle" href="" />
</head><body>

<header><div class='header'></div></header>

<main><div class='wrapper'>

  <span id='errorArea' class='errorArea'></span>

  <div class='summary'>
    <h3 id='empireName'></h3>
    <table>
    <tr><td>Game Turn</td><td><span class='button'><a href='#' id='PrevDoc'><</a></span> <span id='gameTurn'></span> <span class='button'><a href='#' id='NextDoc'>></a></span></td></tr>
    <tr><td>Game Month</td><td id='gameMonth'></td></tr>
    </table>

<!--
    <span class='button'><a href='../docs/rules.html' target='_BLANK'>Campaign Rules</a></span>
    <span class='button'><a href='#' id='UnitListDoc' target='_BLANK'>List of Units</a></span>
-->

    <h3>Economics</h3>
    <table>
    <tr><td>Previous Point Pool</td><td id='previousEPs'></td></tr>
    <tr><td>System Income</td><td id='systemIncome'></td></tr>
    <tr><td>Trade Income</td><td id='tradeIncome'></td></tr>
    <tr><td>Maintenance Expense</td><td id='maintTotal'></td></tr>
    <tr><td>Misc Income</td><td id='miscIncome'></td></tr>
    <tr><td>Misc Expense</td><td id='miscExpense'></td></tr>
    <tr><td class='summation'>Total Available Points</td><td class='summation' id='totalIncome'></td></tr>
    <tr><td>Construction Costs</td><td id='constructionTotal'></td></tr>
    <tr><td>Tech Investment</td><td id='techSpent'></td></tr>
    <tr><td class='summation'>Ending Point Pool</td><td class='summation' id='nextEPs'></td></tr>
    </table>

    <h3>Tech Investment</h3>
    <table>
    <tr><td>Current Tech Year</td><td id='techYear'></td></tr>
    <tr><td>Tech Pool</td><td id='researchInvested'></td></tr>
    <tr><td>Maximum Tech Per Turn </td><td id='maxTechCost'></td></tr>
    <tr><td>Tech Advancement Cost</td><td id='techAdvCost'></td></tr>
    </table>
  </div>

  <div class='orders'>
    <h3>Turn Orders</h3>
    <form accept-charset='UTF-8' action='../orderForm.php' id='ordersForm' method='post' target='_SELF'>
    <input type='hidden' name='dataFile' value=''>

    <span id='ordersArea'></span>
    </form>
  </div>

  <div id='mapImg' class='map'></div>

  <div class='economy'>
    <h3>Maintenance</h3>
    <table id='maintData'>
    </table>
    <h3>Purchases</h3>
    <table id='purchaseData'>
    </table>

    <h3>Construction Status</h3>
    <table id='constructionData'>
    <tr style='font-weight:bolder'><th>Location</th><th>Unit</th><th>Time</th></tr>
    </table>
  </div>

  <div class='fleets' id='fleetData'>
    <h3 class='fleetTitle'>Fleet Assets</h3>
  </div>

  <div class='events' id='eventArea'>
    <h3>Events</h3>
  </div>

  <div class='systems'>
    <h3>System Assets</h3>
    <table style='margin:auto;'><thead>
    <tr><th>System Name</td><th class="sysTableType">Planet Type</th><th>Capacity</th><th>Raw</th><th>Pop</th><th>Morale</th><th>Intel</th><th>Fort</th><th>Output</th><th class="sysTableNotes">Special Notes</th><th class="sysTableFixed">Fixed Units</th></tr>
    </thead><tbody id='systemData'>
    </tbody></table>
  </div>

  <div class='treaties'>
    <h3>Treaties</h3>
    <table style='margin:auto;' id='treatyArea'>
    <tr><th>Empire</th><th>Diplomatic<br>Cooldown</th><th>Treaty</th></tr>
    </table>
  </div>

  <div class='intelligence'>
    <h3>Intelligence Actions</h3>
    <table style='margin:auto;' id='IntelArea'>
    <tr><th>Mission Type</th><th>Target</th><th>Location</th></tr>
    </table>
  </div>

  <div class='trade'>
    <h3>Trade Routes</h3>
    <table style='margin:auto;' id='tradeArea'>
    <tr><th>Fleet</th><th>System #1</th><th>Trade<br>Value</th><th>System #2</th><th>Trade<br>Value</th><th>System #3</th><th>Trade<br>Value</th></tr>
    </table>
  </div>

</div></main> <!-- end container -->

<footer><div class='footer'>
  <br>Copyright &copy; 2022 - 2025, Matthew Potter

<span style="float:right;">
  <label for="themeSelect">Choose Theme:</label>
  <select id="themeSelect"></select>
</span>

</div></footer>
</body></html>
